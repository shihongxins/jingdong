(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderComfirmation"],{"0eb4":function(e,c,t){"use strict";t.d(c,"b",(function(){return r}));var n=t("7a23"),a=Object(n["M"])("data-v-3350b2b6");Object(n["u"])("data-v-3350b2b6");var o={key:0,class:"toast"};Object(n["s"])();var s=a((function(e,c,t,a,s,i){return e.data.content.length?(Object(n["r"])(),Object(n["d"])("div",o,Object(n["C"])(e.data.content),1)):Object(n["e"])("",!0)})),i=Object(n["v"])({content:"",time:3e3}),r=function(e,c){e.length&&(c>500&&(i.time=c),i.content=e)},p={name:"Toast",setup:function(){var e=Object(n["D"])(i),c=e.content;return Object(n["H"])(c,(function(e){e.length>0&&setTimeout((function(){i.content="",i.time=3e3}),i.time)})),{data:i}}};t("aa26");p.render=s,p.__scopeId="data-v-3350b2b6";c["a"]=p},"12c9":function(e,c,t){"use strict";t("a127")},"485e":function(e,c,t){},"51c5":function(e,c,t){"use strict";t("485e")},"78ec":function(e,c,t){"use strict";t("8cd0")},"8b22":function(e,c,t){"use strict";t.r(c);var n=t("7a23"),a=Object(n["M"])("data-v-691ff800");Object(n["u"])("data-v-691ff800");var o={class:"wrapper"},s={class:"detail"};Object(n["s"])();var i=a((function(e,c,t,a,i,r){var p=Object(n["y"])("Header"),u=Object(n["y"])("Products"),d=Object(n["y"])("Comfirmation");return Object(n["r"])(),Object(n["d"])("div",o,[Object(n["h"])(p),Object(n["h"])("div",s,[Object(n["h"])(u,{shop:a.shopInfo},null,8,["shop"])]),Object(n["h"])(d)])})),r=t("6c02"),p=Object(n["M"])("data-v-6ee71eef");Object(n["u"])("data-v-6ee71eef");var u={class:"top"},d={class:"top__header"},l=Object(n["h"])("i",{class:"iconfont icon-back"},null,-1),b=Object(n["h"])("span",null,"确认订单",-1),_=Object(n["f"])('<div class="top__receiver" data-v-6ee71eef><h3 class="top__receiver__title" data-v-6ee71eef>收货地址</h3><div class="top__receiver__address" data-v-6ee71eef>北京理工大学国防科技园2号楼10层</div><div class="top__receiver__user" data-v-6ee71eef><span class="top__receiver__user__name" data-v-6ee71eef>瑶妹（先生）</span><span class="top__receiver__user__tel" data-v-6ee71eef>18911024266</span></div><div class="top__receiver__detail" data-v-6ee71eef><i class="iconfont icon-back" data-v-6ee71eef></i></div></div>',1);Object(n["s"])();var O=p((function(e,c,t,a,o,s){return Object(n["r"])(),Object(n["d"])("div",u,[Object(n["h"])("div",d,[Object(n["h"])("div",{class:"top__header__back",onClick:c[1]||(c[1]=function(){return a.handleBackClick&&a.handleBackClick.apply(a,arguments)})},[l]),b]),_])})),v={name:"Header",setup:function(){var e=Object(r["d"])(),c=function(){e.back()};return{handleBackClick:c}}};t("51c5");v.render=O,v.__scopeId="data-v-6ee71eef";var j=v,f=t("7079"),h=Object(n["M"])("data-v-415684d2");Object(n["u"])("data-v-415684d2");var m={class:"comfirm"},k={class:"comfirm__price"},C=Object(n["g"])(" 实付金额 "),y={class:"comfirm__price--final"};Object(n["s"])();var w=h((function(e,c,t,a,o,s){var i=Object(n["y"])("Popup"),r=Object(n["y"])("Toast");return Object(n["r"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("div",m,[Object(n["h"])("div",k,[C,Object(n["h"])("span",y,"￥"+Object(n["C"])(a.calculations.checkedPrice),1)]),Object(n["h"])("div",{class:"comfirm__btn",onClick:c[1]||(c[1]=function(e){return a.changePopupShowType("comfirm")})},"提交订单")]),Object(n["h"])(i,{onPopupButtonClick:a.handlePopupButtonClick},null,8,["onPopupButtonClick"]),Object(n["h"])(r)],64)})),I=t("1da1"),P=(t("96cf"),t("b0c0"),t("5502")),T=Object(n["M"])("data-v-e0a2a64a");Object(n["u"])("data-v-e0a2a64a");var g={key:0,class:"popup"},B={class:"popup__mask"},S={key:0,class:"popup__content"},M=Object(n["h"])("h3",{class:"popup__content__title"},"确认离开收银台吗？",-1),x=Object(n["h"])("p",{class:"popup__content__desc"},"请尽快完成支付，否则将被取消",-1),H={class:"popup__content__buttons"},J={key:1,class:"popup__content"},R=Object(n["h"])("div",{class:"popup__content__icons"},[Object(n["h"])("i",{class:"iconfont icon-success"})],-1),D=Object(n["h"])("h3",{class:"popup__content__title"},"支付成功，等待配送",-1),L={key:2,class:"popup__content"},N=Object(n["h"])("div",{class:"popup__content__icons"},[Object(n["h"])("i",{class:"iconfont icon-cancel"})],-1),q=Object(n["h"])("h3",{class:"popup__content__title"},"支付失败，请检查网络",-1),z={key:3,class:"popup__content"},A=Object(n["h"])("div",{class:"popup__content__icons"},[Object(n["h"])("i",{class:"iconfont icon-cancel"})],-1),E=Object(n["h"])("h3",{class:"popup__content__title"},"已取消",-1);Object(n["s"])();var F=T((function(e,c,t,a,o,s){return"none"!=e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",g,[Object(n["h"])("div",B,["comfirm"==e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",S,[M,x,Object(n["h"])("div",H,[Object(n["h"])("button",{class:"cancel",onClick:c[1]||(c[1]=function(){return e.handleCancelClick&&e.handleCancelClick.apply(e,arguments)})},"取消订单"),Object(n["h"])("button",{class:"comfirmed",onClick:c[2]||(c[2]=function(){return e.handleComfirmClick&&e.handleComfirmClick.apply(e,arguments)})},"确认支付")])])):Object(n["e"])("",!0),"success"==e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",J,[R,D])):Object(n["e"])("",!0),"faild"==e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",L,[N,q])):Object(n["e"])("",!0),"cancel"==e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",z,[A,E])):Object(n["e"])("",!0)])])):Object(n["e"])("",!0)})),G=t("5530"),K=Object(n["w"])("none"),Q=function(e){["none","comfirm","success","faild","cancel"].indexOf(e)>-1?K.value=e:K.value="none"},U=function(e){var c=function(){e("popupButtonClick","cancel")},t=function(){e("popupButtonClick","comfirmed")};return{popupShowType:K,changePopupShowType:Q,handleCancelClick:c,handleComfirmClick:t}},V={name:"Popup",setup:function(e,c){var t=c.emit;return Object(G["a"])({},U(t))}};t("78ec");V.render=F,V.__scopeId="data-v-e0a2a64a";var W=V,X=t("0eb4"),Y=t("9983"),Z=t("b775"),$=function(e){var c=Object(r["d"])(),t=Object(P["b"])(),a={_id:1},o=Object(Y["a"])(e),s=o.shopInfo,i=o.products,p=Object(n["b"])((function(){var e=[];for(var c in i.value){var t=i.value[c];t&&t.checked&&e.push({id:t._id,num:t.count})}return e})),u={addressId:a._id,shopId:s.value._id,shopName:s.value.name,isCanceled:!1,products:p.value},d=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.isCanceled=n,Q("none"),e.prev=2,e.next=5,Object(Z["b"])("/api/order",u,{headers:{"content-type":"application/json"}});case 5:a=e.sent,a&&0===a.errno?(t.commit("clearCartProducts",{shopId:u.shopId}),Q(n?"cancel":"success"),setTimeout((function(){Q("none"),c.push({name:"OrderList"})}),2e3)):Object(X["b"])("创建订单失败，".concat(a.message)),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),Object(X["b"])("创建订单出错，".concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(c){return e.apply(this,arguments)}}();return{createOrder:d}},ee={name:"Comfirmation",components:{Popup:W,Toast:X["a"]},setup:function(){var e=Object(r["c"])(),c=e.params.shopId,t=Object(Y["a"])(c),n=t.calculations,a=$(c),o=a.createOrder,s=function(e){"cancel"===e&&o(!0),"comfirmed"===e&&o(!1)};return{calculations:n,changePopupShowType:Q,handlePopupButtonClick:s}}};t("9e79");ee.render=w,ee.__scopeId="data-v-415684d2";var ce=ee,te={name:"OrderComfirmation",components:{Header:j,Products:f["a"],Comfirmation:ce},setup:function(){var e=Object(r["c"])(),c=e.params.shopId,t=Object(Y["a"])(c),n=t.shopInfo;return{shopInfo:n}}};t("12c9");te.render=i,te.__scopeId="data-v-691ff800";c["default"]=te},"8cd0":function(e,c,t){},"9e79":function(e,c,t){"use strict";t("c6c7")},a127:function(e,c,t){},aa26:function(e,c,t){"use strict";t("d0a2")},c6c7:function(e,c,t){},d0a2:function(e,c,t){}}]);
//# sourceMappingURL=orderComfirmation.cee0af8e.js.map