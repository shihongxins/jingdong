(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderComfirmation"],{"0c23":function(e,t,c){"use strict";c("583a")},"0eb4":function(e,t,c){"use strict";c.d(t,"b",(function(){return s}));var n=c("7a23"),a=Object(n["I"])("data-v-3350b2b6");Object(n["t"])("data-v-3350b2b6");var o={key:0,class:"toast"};Object(n["r"])();var r=a((function(e,t,c,a,r,i){return e.data.content.length?(Object(n["q"])(),Object(n["d"])("div",o,Object(n["z"])(e.data.content),1)):Object(n["e"])("",!0)})),i=Object(n["u"])({content:"",time:3e3}),s=function(e,t){e.length&&(t>500&&(i.time=t),i.content=e)},u={name:"Toast",setup:function(){var e=Object(n["A"])(i),t=e.content;return Object(n["E"])(t,(function(e){e.length>0&&setTimeout((function(){i.content="",i.time=3e3}),i.time)})),{data:i}}};c("aa26");u.render=r,u.__scopeId="data-v-3350b2b6";t["a"]=u},"12c9":function(e,t,c){"use strict";c("a127")},"583a":function(e,t,c){},"5d48":function(e,t,c){},"8b22":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a=Object(n["I"])("data-v-691ff800");Object(n["t"])("data-v-691ff800");var o={class:"wrapper"},r={class:"detail"};Object(n["r"])();var i=a((function(e,t,c,a,i,s){var u=Object(n["x"])("Header"),p=Object(n["x"])("Products"),d=Object(n["x"])("Comfirmation");return Object(n["q"])(),Object(n["d"])("div",o,[Object(n["h"])(u),Object(n["h"])("div",r,[Object(n["h"])(p,{shop:a.shopInfo},null,8,["shop"])]),Object(n["h"])(d)])})),s=c("6c02"),u=Object(n["I"])("data-v-b7cea1f4");Object(n["t"])("data-v-b7cea1f4");var p={class:"top"},d={class:"top__header"},b=Object(n["h"])("i",{class:"iconfont icon-back"},null,-1),l=Object(n["h"])("span",null,"确认订单",-1),f=Object(n["f"])('<div class="top__receiver" data-v-b7cea1f4><h3 class="top__receiver__title" data-v-b7cea1f4>收货地址</h3><div class="top__receiver__address" data-v-b7cea1f4>北京理工大学国防科技园2号楼10层</div><div class="top__receiver__user" data-v-b7cea1f4><span class="top__receiver__user__name" data-v-b7cea1f4>瑶妹（先生）</span><span class="top__receiver__user__tel" data-v-b7cea1f4>18911024266</span></div><div class="top__receiver__detail" data-v-b7cea1f4><i class="iconfont icon-back" data-v-b7cea1f4></i></div></div>',1);Object(n["r"])();var v=u((function(e,t,c,a,o,r){return Object(n["q"])(),Object(n["d"])("div",p,[Object(n["h"])("div",d,[Object(n["h"])("div",{class:"top__header__back",onClick:t[1]||(t[1]=function(){return a.handleBackClick&&a.handleBackClick.apply(a,arguments)})},[b]),l]),f])})),O={name:"Header",setup:function(){var e=Object(s["d"])(),t=function(){e.back()};return{handleBackClick:t}}};c("f919");O.render=v,O.__scopeId="data-v-b7cea1f4";var j=O,_=c("7079"),h=Object(n["I"])("data-v-54dd543e");Object(n["t"])("data-v-54dd543e");var m={class:"comfirm"},k={class:"comfirm__price"},C=Object(n["g"])(" 实付金额 "),I={class:"comfirm__price--final"};Object(n["r"])();var w=h((function(e,t,c,a,o,r){var i=Object(n["x"])("Popup"),s=Object(n["x"])("Toast");return Object(n["q"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("div",m,[Object(n["h"])("div",k,[C,Object(n["h"])("span",I,"￥"+Object(n["z"])(a.calculations.checkedPrice),1)]),Object(n["h"])("div",{class:"comfirm__btn",onClick:t[1]||(t[1]=function(e){return a.changePopupShowType("comfirm")})},"提交订单")]),Object(n["h"])(i,{onPopupButtonClick:a.handlePopupButtonClick},null,8,["onPopupButtonClick"]),Object(n["h"])(s)],64)})),y=c("1da1"),P=(c("96cf"),c("b0c0"),c("5502")),T=Object(n["I"])("data-v-45ee32f5");Object(n["t"])("data-v-45ee32f5");var g={key:0,class:"popup"},x={class:"popup__mask"},B={key:0,class:"popup__content"},q=Object(n["h"])("h3",{class:"popup__content__title"},"确认离开收银台吗？",-1),S=Object(n["h"])("p",{class:"popup__content__desc"},"请尽快完成支付，否则将被取消",-1),H={class:"popup__content__buttons"},z={key:1,class:"popup__content"},J={class:"popup__content__icons"},R=Object(n["h"])("i",{class:"iconfont icon-success"},null,-1),A=Object(n["h"])("h3",{class:"popup__content__title"},"支付成功，等待配送",-1);Object(n["r"])();var E=T((function(e,t,c,a,o,r){return"none"!=e.popupShowType?(Object(n["q"])(),Object(n["d"])("div",g,[Object(n["h"])("div",x,["comfirm"==e.popupShowType?(Object(n["q"])(),Object(n["d"])("div",B,[q,S,Object(n["h"])("div",H,[Object(n["h"])("button",{class:"cancel",onClick:t[1]||(t[1]=function(){return e.handleCancelClick&&e.handleCancelClick.apply(e,arguments)})},"取消订单"),Object(n["h"])("button",{class:"comfirmed",onClick:t[2]||(t[2]=function(){return e.handleComfirmClick&&e.handleComfirmClick.apply(e,arguments)})},"确认支付")])])):Object(n["e"])("",!0),"success"==e.popupShowType?(Object(n["q"])(),Object(n["d"])("div",z,[Object(n["h"])("div",J,[Object(n["h"])("i",{class:"iconfont icon-error",onClick:t[3]||(t[3]=function(){return e.handleCancelClick&&e.handleCancelClick.apply(e,arguments)})}),R]),A])):Object(n["e"])("",!0)])])):Object(n["e"])("",!0)})),L=c("5530"),N=Object(n["v"])("none"),D=function(e){["none","comfirm","success"].indexOf(e)>-1?N.value=e:N.value="none"},F=function(e){var t=function(){e("popupButtonClick","cancel")},c=function(){e("popupButtonClick","comfirmed")};return{popupShowType:N,changePopupShowType:D,handleCancelClick:t,handleComfirmClick:c}},G={name:"Popup",setup:function(e,t){var c=t.emit;return Object(L["a"])({},F(c))}};c("a297");G.render=E,G.__scopeId="data-v-45ee32f5";var K=G,M=c("0eb4"),Q=c("9983"),U=c("b775"),V=function(e){var t=Object(s["d"])(),c=Object(P["b"])(),a={_id:1},o=Object(Q["a"])(e),r=o.shopInfo,i=o.products,u=Object(n["b"])((function(){var e=[];for(var t in i.value){var c=i.value[t];c&&c.checked&&e.push({id:c._id,num:c.count})}return e})),p={addressId:a._id,shopId:r.value._id,shopName:r.value.name,isCanceled:!1,products:u.value},d=function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p.isCanceled=n,D("none"),e.prev=2,e.next=5,Object(U["b"])("/api/order",p,{headers:{"content-type":"application/json"}});case 5:a=e.sent,a&&0===a.errno?(c.commit("clearCartProducts",{shopId:p.shopId}),D("success"),setTimeout((function(){D("none"),t.push({name:"OrderList"})}),2e3)):Object(M["b"])("创建订单失败，".concat(a.message)),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),Object(M["b"])("创建订单出错，".concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return{createOrder:d}},W={name:"Comfirmation",components:{Popup:K,Toast:M["a"]},setup:function(){var e=Object(s["c"])(),t=e.params.shopId,c=Object(Q["a"])(t),n=c.calculations,a=V(t),o=a.createOrder,r=function(e){"cancel"===e&&o(!0),"comfirmed"===e&&o(!1)};return{calculations:n,changePopupShowType:D,handlePopupButtonClick:r}}};c("0c23");W.render=w,W.__scopeId="data-v-54dd543e";var X=W,Y={name:"OrderComfirmation",components:{Header:j,Products:_["a"],Comfirmation:X},setup:function(){var e=Object(s["c"])(),t=e.params.shopId,c=Object(Q["a"])(t),n=c.shopInfo;return{shopInfo:n}}};c("12c9");Y.render=i,Y.__scopeId="data-v-691ff800";t["default"]=Y},a127:function(e,t,c){},a297:function(e,t,c){"use strict";c("f146")},aa26:function(e,t,c){"use strict";c("d0a2")},d0a2:function(e,t,c){},f146:function(e,t,c){},f919:function(e,t,c){"use strict";c("5d48")}}]);
//# sourceMappingURL=orderComfirmation.0680c355.js.map