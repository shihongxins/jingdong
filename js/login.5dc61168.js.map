{"version":3,"sources":["webpack:///./src/components/Toast.vue","webpack:///./src/components/Toast.vue?d444","webpack:///./src/views/login/Login.vue?1616","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./src/components/Toast.vue?7de6","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./src/views/login/Login.vue","webpack:///./src/views/login/Login.vue?c907"],"names":["class","data","content","length","time","showToast","c","t","Toast","name","setup","value","setTimeout","render","__scopeId","$","$trim","trim","forcedStringTrimMethod","target","proto","forced","this","module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","fails","non","METHOD_NAME","src","alt","action","autocomplete","type","placeholder","username","password","handleLogin","handleJumpRegister","router","headers","result","errno","localStorage","setItem","push","JSON","stringify","message","components"],"mappings":"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","file":"js/login.5dc61168.js","sourcesContent":["<template>\n  <div v-if=\"data.content.length\" class=\"toast\">\n    {{data.content}}\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, watch } from 'vue'\n\n// toast data\nconst data = reactive({\n  content: '',\n  time: 3000\n})\n\n// show toast function\nconst showToast = (c, t) => {\n  if (c.length) {\n    if (t > 500) {\n      data.time = t\n    }\n    data.content = c\n  }\n}\n\n// Toast component by Vue Composition API\nconst Toast = {\n  name: 'Toast',\n  setup () {\n    // auto hide toast\n    const { content } = toRefs(data)\n    watch(content, (value) => {\n      if (value.length > 0) {\n        setTimeout(() => {\n          data.content = ''\n          data.time = 3000\n        }, data.time)\n      }\n    })\n    return {\n      data\n    }\n  }\n}\n\nexport { Toast as default, showToast }\n</script>\n\n<style lang=\"scss\" scoped>\n.toast {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: .05rem;\n  padding: .1rem;\n  color: #fff;\n  background: rgba(0, 0, 0, 0.4);\n}\n</style>\n","import { render } from \"./Toast.vue?vue&type=template&id=3350b2b6&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=3350b2b6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3350b2b6\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=3c0421af&lang=scss&scoped=true\"","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Toast.vue?vue&type=style&index=0&id=3350b2b6&lang=scss&scoped=true\"","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","<template>\n  <div class=\"wrapper\">\n    <img class=\"wrapper__img\" src=\"https://shihongxins.github.io/data-mock/shop/imgs/user.png\" alt=\"\">\n    <form action=\"\" class=\"wrapper__form\" autocomplete=\"off\">\n      <div class=\"wrapper__form__input\">\n        <input\n          type=\"text\"\n          name=\"username\"\n          placeholder=\"请输入手机号\"\n          autocomplete=\"off\"\n          v-model=\"username\">\n      </div>\n      <div class=\"wrapper__form__input\">\n        <input\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"请输入密码\"\n          autocomplete=\"new-password\"\n          v-model=\"password\">\n      </div>\n      <div class=\"wrapper__form__button\">\n        <button class=\"button-login\" type=\"button\" @click=\"handleLogin\">登录</button>\n      </div>\n    </form>\n    <div class=\"wrapper__link\">\n      <a class=\"wrapper__link-register\" @click.prevent=\"handleJumpRegister\">立即注册</a>\n      <a class=\"wrapper__link-findpwd\">找回密码</a>\n    </div>\n  </div>\n  <Toast />\n</template>\n\n<script>\nimport { reactive, toRefs } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { post } from '../../utils/request.js'\nimport Toast, { showToast } from '../../components/Toast.vue'\n\n// 登录业务逻辑\nconst useLoginEffect = () => {\n  const router = useRouter()\n  const data = reactive({\n    username: '',\n    password: ''\n  })\n  const handleLogin = async () => {\n    if (data.username.trim() === '' || data.password.trim() === '') {\n      showToast('请输入完整登录信息')\n      return\n    }\n    try {\n      showToast('... ...')\n      const result = await post('/api/user/login', data, { headers: { 'content-type': 'application/json' } })\n      if (result.errno === 0) {\n        showToast('登录成功')\n        localStorage.setItem('isAuthenticated', 'true')\n        router.push({ name: 'Home' })\n      } else {\n        showToast('登录失败' + JSON.stringify(result))\n      }\n    } catch (e) {\n      showToast(`登录出错，${e.message}`)\n    }\n  }\n\n  const { username, password } = toRefs(data)\n  return {\n    username, password, handleLogin\n  }\n}\n\n// 跳转业务逻辑\nconst useJumpRegisterEffect = () => {\n  const router = useRouter()\n  const handleJumpRegister = () => {\n    router.push({ name: 'Register' })\n  }\n\n  return { handleJumpRegister }\n}\n\nexport default {\n  name: 'Login',\n  components: {\n    Toast\n  },\n  // 理解 Composition API 中的 Setup 函数，职责仅仅是业务流程的调度\n  // 而具体业务要看对应的方法，减少了业务与组件的耦合\n  setup () {\n    const { username, password, handleLogin } = useLoginEffect()\n    const { handleJumpRegister } = useJumpRegisterEffect()\n    return {\n      username,\n      password,\n      handleLogin,\n      handleJumpRegister\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../assets/style/variables.scss';\n\n.wrapper {\n  position: absolute;\n  top: 50%;\n  right: 0;\n  left: 0;\n  transform: translateY(-50%);\n  &__img {\n    display: block;\n    margin: 0 auto .16rem;\n    width: .66rem;\n    height: .66rem;\n  }\n  &__form {\n    &__input {\n      margin: 0 .4rem .16rem;\n      input {\n        display: block;\n        box-sizing: border-box;\n        outline: none;\n        border: 1px solid rgba(0,0,0,0.1);\n        border-radius: .06rem;\n        padding: 0 .16rem;\n        width: 100%;\n        height: .48rem;\n        line-height: .48rem;\n        background: #f9f9f9;\n        font-size: .16rem;\n        color: $notice-fontcolor;\n      }\n    }\n    &__button {\n      margin: .32rem .4rem 0;\n      border-radius: .04rem;\n      background: $btn-bgcolor;\n      box-shadow: 0 .04rem .08rem 0 rgba(0,145,255,0.32);\n      button {\n        outline: none;\n        border: none;\n        width: 100%;\n        height: .48rem;\n        line-height: .48rem;\n        font-size: .16rem;\n        background: none;\n        color: $white-fontcolor;\n      }\n    }\n  }\n  &__link {\n    margin-top: .16rem;\n    text-align: center;\n    a {\n      font-size: .14rem;\n      color: $notice-fontcolor;\n      &:first-child {\n        margin-right: 1em;\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./Login.vue?vue&type=template&id=3c0421af&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=3c0421af&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3c0421af\"\n\nexport default script"],"sourceRoot":""}