(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderComfirmation"],{"0eb4":function(e,t,c){"use strict";c.d(t,"b",(function(){return s}));var n=c("7a23"),a=Object(n["M"])("data-v-3350b2b6");Object(n["u"])("data-v-3350b2b6");var o={key:0,class:"toast"};Object(n["s"])();var r=a((function(e,t,c,a,r,i){return e.data.content.length?(Object(n["r"])(),Object(n["d"])("div",o,Object(n["C"])(e.data.content),1)):Object(n["e"])("",!0)})),i=Object(n["v"])({content:"",time:3e3}),s=function(e,t){e.length&&(t>500&&(i.time=t),i.content=e)},u={name:"Toast",setup:function(){var e=Object(n["D"])(i),t=e.content;return Object(n["H"])(t,(function(e){e.length>0&&setTimeout((function(){i.content="",i.time=3e3}),i.time)})),{data:i}}};c("aa26");u.render=r,u.__scopeId="data-v-3350b2b6";t["a"]=u},"12c9":function(e,t,c){"use strict";c("a127")},"28e0":function(e,t,c){},"485e":function(e,t,c){},"49ce":function(e,t,c){},"51c5":function(e,t,c){"use strict";c("485e")},"741e":function(e,t,c){"use strict";c("49ce")},"8b22":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a=Object(n["M"])("data-v-691ff800");Object(n["u"])("data-v-691ff800");var o={class:"wrapper"},r={class:"detail"};Object(n["s"])();var i=a((function(e,t,c,a,i,s){var u=Object(n["y"])("Header"),p=Object(n["y"])("Products"),d=Object(n["y"])("Comfirmation");return Object(n["r"])(),Object(n["d"])("div",o,[Object(n["h"])(u),Object(n["h"])("div",r,[Object(n["h"])(p,{shop:a.shopInfo},null,8,["shop"])]),Object(n["h"])(d)])})),s=c("6c02"),u=Object(n["M"])("data-v-6ee71eef");Object(n["u"])("data-v-6ee71eef");var p={class:"top"},d={class:"top__header"},l=Object(n["h"])("i",{class:"iconfont icon-back"},null,-1),b=Object(n["h"])("span",null,"确认订单",-1),f=Object(n["f"])('<div class="top__receiver" data-v-6ee71eef><h3 class="top__receiver__title" data-v-6ee71eef>收货地址</h3><div class="top__receiver__address" data-v-6ee71eef>北京理工大学国防科技园2号楼10层</div><div class="top__receiver__user" data-v-6ee71eef><span class="top__receiver__user__name" data-v-6ee71eef>瑶妹（先生）</span><span class="top__receiver__user__tel" data-v-6ee71eef>18911024266</span></div><div class="top__receiver__detail" data-v-6ee71eef><i class="iconfont icon-back" data-v-6ee71eef></i></div></div>',1);Object(n["s"])();var v=u((function(e,t,c,a,o,r){return Object(n["r"])(),Object(n["d"])("div",p,[Object(n["h"])("div",d,[Object(n["h"])("div",{class:"top__header__back",onClick:t[1]||(t[1]=function(){return a.handleBackClick&&a.handleBackClick.apply(a,arguments)})},[l]),b]),f])})),O={name:"Header",setup:function(){var e=Object(s["d"])(),t=function(){e.back()};return{handleBackClick:t}}};c("51c5");O.render=v,O.__scopeId="data-v-6ee71eef";var j=O,_=c("7079"),h=Object(n["M"])("data-v-256d370a");Object(n["u"])("data-v-256d370a");var m={class:"comfirm"},k={class:"comfirm__price"},C=Object(n["g"])(" 实付金额 "),y={class:"comfirm__price--final"};Object(n["s"])();var w=h((function(e,t,c,a,o,r){var i=Object(n["y"])("Popup"),s=Object(n["y"])("Toast");return Object(n["r"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("div",m,[Object(n["h"])("div",k,[C,Object(n["h"])("span",y,"￥"+Object(n["C"])(a.calculations.checkedPrice),1)]),Object(n["h"])("div",{class:"comfirm__btn",onClick:t[1]||(t[1]=function(e){return a.changePopupShowType("comfirm")})},"提交订单")]),Object(n["h"])(i,{onPopupButtonClick:a.handlePopupButtonClick},null,8,["onPopupButtonClick"]),Object(n["h"])(s)],64)})),I=c("1da1"),P=(c("96cf"),c("b0c0"),c("5502")),T=Object(n["M"])("data-v-b0421d5c");Object(n["u"])("data-v-b0421d5c");var g={key:0,class:"popup"},B={class:"popup__mask"},S={key:0,class:"popup__content"},M=Object(n["h"])("h3",{class:"popup__content__title"},"确认离开收银台吗？",-1),x=Object(n["h"])("p",{class:"popup__content__desc"},"请尽快完成支付，否则将被取消",-1),H={class:"popup__content__buttons"},J={key:1,class:"popup__content"},R={class:"popup__content__icons"},D=Object(n["h"])("i",{class:"iconfont icon-success"},null,-1),L=Object(n["h"])("h3",{class:"popup__content__title"},"支付成功，等待配送",-1);Object(n["s"])();var N=T((function(e,t,c,a,o,r){return"none"!=e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",g,[Object(n["h"])("div",B,["comfirm"==e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",S,[M,x,Object(n["h"])("div",H,[Object(n["h"])("button",{class:"cancel",onClick:t[1]||(t[1]=function(){return e.handleCancelClick&&e.handleCancelClick.apply(e,arguments)})},"取消订单"),Object(n["h"])("button",{class:"comfirmed",onClick:t[2]||(t[2]=function(){return e.handleComfirmClick&&e.handleComfirmClick.apply(e,arguments)})},"确认支付")])])):Object(n["e"])("",!0),"success"==e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",J,[Object(n["h"])("div",R,[Object(n["h"])("i",{class:"iconfont icon-error",onClick:t[3]||(t[3]=function(){return e.handleCancelClick&&e.handleCancelClick.apply(e,arguments)})}),D]),L])):Object(n["e"])("",!0)])])):Object(n["e"])("",!0)})),q=c("5530"),z=Object(n["w"])("none"),A=function(e){["none","comfirm","success"].indexOf(e)>-1?z.value=e:z.value="none"},E=function(e){var t=function(){e("popupButtonClick","cancel")},c=function(){e("popupButtonClick","comfirmed")};return{popupShowType:z,changePopupShowType:A,handleCancelClick:t,handleComfirmClick:c}},F={name:"Popup",setup:function(e,t){var c=t.emit;return Object(q["a"])({},E(c))}};c("741e");F.render=N,F.__scopeId="data-v-b0421d5c";var G=F,K=c("0eb4"),Q=c("9983"),U=c("b775"),V=function(e){var t=Object(s["d"])(),c=Object(P["b"])(),a={_id:1},o=Object(Q["a"])(e),r=o.shopInfo,i=o.products,u=Object(n["b"])((function(){var e=[];for(var t in i.value){var c=i.value[t];c&&c.checked&&e.push({id:c._id,num:c.count})}return e})),p={addressId:a._id,shopId:r.value._id,shopName:r.value.name,isCanceled:!1,products:u.value},d=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p.isCanceled=n,A("none"),e.prev=2,e.next=5,Object(U["b"])("/api/order",p,{headers:{"content-type":"application/json"}});case 5:a=e.sent,a&&0===a.errno?(c.commit("clearCartProducts",{shopId:p.shopId}),A("success"),setTimeout((function(){A("none"),t.push({name:"OrderList"})}),2e3)):Object(K["b"])("创建订单失败，".concat(a.message)),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),Object(K["b"])("创建订单出错，".concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return{createOrder:d}},W={name:"Comfirmation",components:{Popup:G,Toast:K["a"]},setup:function(){var e=Object(s["c"])(),t=e.params.shopId,c=Object(Q["a"])(t),n=c.calculations,a=V(t),o=a.createOrder,r=function(e){"cancel"===e&&o(!0),"comfirmed"===e&&o(!1)};return{calculations:n,changePopupShowType:A,handlePopupButtonClick:r}}};c("d4fb");W.render=w,W.__scopeId="data-v-256d370a";var X=W,Y={name:"OrderComfirmation",components:{Header:j,Products:_["a"],Comfirmation:X},setup:function(){var e=Object(s["c"])(),t=e.params.shopId,c=Object(Q["a"])(t),n=c.shopInfo;return{shopInfo:n}}};c("12c9");Y.render=i,Y.__scopeId="data-v-691ff800";t["default"]=Y},a127:function(e,t,c){},aa26:function(e,t,c){"use strict";c("d0a2")},d0a2:function(e,t,c){},d4fb:function(e,t,c){"use strict";c("28e0")}}]);
//# sourceMappingURL=orderComfirmation.f915e5fa.js.map