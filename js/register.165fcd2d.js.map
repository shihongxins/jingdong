{"version":3,"sources":["webpack:///./src/views/register/Register.vue?8741","webpack:///./src/components/Toast.vue","webpack:///./src/components/Toast.vue?d444","webpack:///./src/views/register/Register.vue","webpack:///./src/views/register/Register.vue?9df6","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./src/components/Toast.vue?7de6","webpack:///./node_modules/core-js/internals/string-trim-forced.js"],"names":["class","data","content","length","time","showToast","c","t","Toast","name","setup","value","setTimeout","render","__scopeId","src","alt","action","autocomplete","type","placeholder","username","password","comfirmPwd","handleRegister","handleJumpLogin","router","trim","headers","result","errno","push","JSON","stringify","message","components","$","$trim","forcedStringTrimMethod","target","proto","forced","this","module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","fails","non","METHOD_NAME"],"mappings":"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","file":"js/register.165fcd2d.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Register.vue?vue&type=style&index=0&id=75995298&lang=scss&scoped=true\"","<template>\n  <div v-if=\"data.content.length\" class=\"toast\">\n    {{data.content}}\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, watch } from 'vue'\n\n// toast data\nconst data = reactive({\n  content: '',\n  time: 3000\n})\n\n// show toast function\nconst showToast = (c, t) => {\n  if (c.length) {\n    if (t > 500) {\n      data.time = t\n    }\n    data.content = c\n  }\n}\n\n// Toast component by Vue Composition API\nconst Toast = {\n  name: 'Toast',\n  setup () {\n    // auto hide toast\n    const { content } = toRefs(data)\n    watch(content, (value) => {\n      if (value.length > 0) {\n        setTimeout(() => {\n          data.content = ''\n          data.time = 3000\n        }, data.time)\n      }\n    })\n    return {\n      data\n    }\n  }\n}\n\nexport { Toast as default, showToast }\n</script>\n\n<style lang=\"scss\" scoped>\n.toast {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: .05rem;\n  padding: .1rem;\n  color: #fff;\n  background: rgba(0, 0, 0, 0.4);\n}\n</style>\n","import { render } from \"./Toast.vue?vue&type=template&id=3350b2b6&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=3350b2b6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3350b2b6\"\n\nexport default script","<template>\n  <div class=\"wrapper\">\n    <img class=\"wrapper__img\" src=\"https://shihongxins.github.io/data-mock/shop/imgs/user.png\" alt=\"\">\n    <form action=\"\" class=\"wrapper__form\" autocomplete=\"off\">\n      <div class=\"wrapper__form__input\">\n        <input\n          type=\"text\"\n          name=\"username\"\n          placeholder=\"请输入手机号\"\n          autocomplete=\"off\"\n          v-model=\"username\">\n      </div>\n      <div class=\"wrapper__form__input\">\n        <input\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"请输入密码\"\n          autocomplete=\"new-password\"\n          v-model=\"password\">\n      </div>\n      <div class=\"wrapper__form__input\">\n        <input\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"确认密码\"\n          autocomplete=\"new-password\"\n          v-model=\"comfirmPwd\">\n      </div>\n      <div class=\"wrapper__form__button\">\n        <button class=\"button-register\" type=\"button\" @click=\"handleRegister\">注册</button>\n      </div>\n    </form>\n    <div class=\"wrapper__link\">\n      <a class=\"wrapper__link-login\" @click.prevent=\"handleJumpLogin\">已有账号去登录</a>\n      <a class=\"wrapper__link-findpwd\">找回密码</a>\n    </div>\n    <Toast />\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { post } from '../../utils/request.js'\nimport Toast, { showToast } from '../../components/Toast.vue'\n\n// 注册业务逻辑\nconst useRegisterEffect = () => {\n  const router = useRouter()\n  const data = reactive({\n    username: '',\n    password: '',\n    comfirmPwd: ''\n  })\n  const handleRegister = async () => {\n    if (data.username.trim() === '' || data.password.trim() === '' || data.comfirmPwd.trim() === '') {\n      showToast('请输入完整注册信息')\n      return\n    }\n    if (data.comfirmPwd !== data.password) {\n      showToast('两次密码不一致')\n      return\n    }\n    try {\n      showToast('... ...')\n      const result = await post('/api/user/register', data, { headers: { 'content-type': 'application/json' } })\n      if (result && result.errno === 0) {\n        router.push({ name: 'Login' })\n      } else {\n        showToast('注册失败' + JSON.stringify(result))\n      }\n    } catch (e) {\n      showToast(`注册出错，${e.message}`)\n    }\n  }\n\n  const { username, password, comfirmPwd } = toRefs(data)\n  return {\n    username, password, comfirmPwd, handleRegister\n  }\n}\n\n// 跳转业务逻辑\nconst useJumpLoginEffect = () => {\n  const router = useRouter()\n  const handleJumpLogin = () => {\n    router.push({ name: 'Login' })\n  }\n\n  return { handleJumpLogin }\n}\n\nexport default {\n  name: 'Register',\n  components: {\n    Toast\n  },\n  // 理解 Composition API 中的 Setup 函数，职责仅仅是业务流程的调度\n  // 而具体业务要看对应的方法，减少了业务与组件的耦合\n  setup () {\n    const { username, password, comfirmPwd, handleRegister } = useRegisterEffect()\n    const { handleJumpLogin } = useJumpLoginEffect()\n    return {\n      username,\n      password,\n      comfirmPwd,\n      handleRegister,\n      handleJumpLogin\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../assets/style/variables.scss';\n\n.wrapper {\n  position: absolute;\n  top: 50%;\n  right: 0;\n  left: 0;\n  transform: translateY(-50%);\n  &__img {\n    display: block;\n    margin: 0 auto .16rem;\n    width: .66rem;\n    height: .66rem;\n  }\n  &__form {\n    &__input {\n      margin: 0 .4rem .16rem;\n      input {\n        display: block;\n        box-sizing: border-box;\n        outline: none;\n        border: .01rem solid rgba(0,0,0,0.1); // TODO: 1px border\n        border-radius: .06rem;\n        padding: 0 .16rem;\n        width: 100%;\n        height: .48rem;\n        line-height: .48rem;\n        background: #f9f9f9;\n        font-size: .16rem;\n        color: $notice-fontcolor;\n      }\n    }\n    &__button {\n      margin: .32rem .4rem 0;\n      border-radius: .04rem;\n      background: $btn-bgcolor;\n      box-shadow: 0 .04rem .08rem 0 rgba(0,145,255,0.32);\n      button {\n        outline: none;\n        border: none;\n        width: 100%;\n        height: .48rem;\n        line-height: .48rem;\n        font-size: .16rem;\n        background: none;\n        color: $white-fontcolor;\n      }\n    }\n  }\n  &__link {\n    margin-top: .16rem;\n    text-align: center;\n    a {\n      font-size: .14rem;\n      color: $notice-fontcolor;\n      &:first-child {\n        margin-right: 1em;\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./Register.vue?vue&type=template&id=75995298&scoped=true\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=75995298&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-75995298\"\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Toast.vue?vue&type=style&index=0&id=3350b2b6&lang=scss&scoped=true\"","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n"],"sourceRoot":""}