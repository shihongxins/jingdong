{"version":3,"sources":["webpack:///./src/views/address/AddressEdit.vue","webpack:///./src/views/address/AddressEdit.vue?52d9","webpack:///./src/views/address/AddressEdit.vue?45a7"],"names":["class","status","eventType","handleActionBtnClick","type","name","placeholder","address","city","department","houseNumber","phone","route","query","addressId","data","getAddress","result","errno","message","router","etype","newaddress","value","postUrl","headers","setTimeout","push","components","AddressHeader","Toast","setup","render","__scopeId"],"mappings":"6NACOA,MAAM,W,GAIFA,MAAM,0B,GACJA,MAAM,iB,GACJA,MAAM,uB,iBACF,W,GAKJA,MAAM,uB,iBACF,e,GAKJA,MAAM,uB,iBACF,a,GAKJA,MAAM,uB,iBACF,U,GAKJA,MAAM,uB,iBACF,W,oKA/BjB,eAsCM,MAtCN,EAsCM,CArCJ,eAE0C,GADvCC,OAAQ,EAAAC,UACR,iBAAgB,EAAAC,sB,sCACjB,eAiCM,MAjCN,EAiCM,CAhCJ,eA+BM,MA/BN,EA+BM,CA9BJ,eAKM,MALN,EAKM,CAJJ,eAGQ,c,iBADN,eAAyE,SAAlEC,KAAK,OAAOC,KAAK,OAAOC,YAAY,O,qDAAgB,EAAAC,QAAQC,KAAI,K,mBAAZ,EAAAD,QAAQC,YAGvE,eAKM,MALN,EAKM,CAJJ,eAGQ,c,iBADN,eAAwF,SAAjFJ,KAAK,OAAOC,KAAK,aAAaC,YAAY,U,qDAAmB,EAAAC,QAAQE,WAAU,K,mBAAlB,EAAAF,QAAQE,kBAGhF,eAKM,MALN,EAKM,CAJJ,eAGQ,c,iBADN,eAA2F,SAApFL,KAAK,OAAOC,KAAK,cAAcC,YAAY,W,qDAAoB,EAAAC,QAAQG,YAAW,K,mBAAnB,EAAAH,QAAQG,mBAGlF,eAKM,MALN,EAKM,CAJJ,eAGQ,c,iBADN,eAA6E,SAAtEN,KAAK,OAAOC,KAAK,OAAOC,YAAY,W,qDAAoB,EAAAC,QAAQF,KAAI,K,mBAAZ,EAAAE,QAAQF,YAG3E,eAKM,MALN,EAKM,CAJJ,eAGQ,c,iBADN,eAAiF,SAA1ED,KAAK,OAAOC,KAAK,QAAQC,YAAY,a,qDAAsB,EAAAC,QAAQI,MAAK,K,mBAAb,EAAAJ,QAAQI,mBAMtF,eAAS,I,2FAUL,EAAuB,WAE3B,IAAMC,EAAQ,iBAFmB,EAGAA,EAAMC,MAA/BX,EAHyB,EAGzBA,UAAWY,EAHc,EAGdA,UACbC,EAAO,eAAS,CAAER,QAAS,KAC3BS,EAAS,yDAAI,6HAEM,eAAI,qBAAD,OAAsBF,IAF/B,OAETG,EAFS,OAGXA,GAA2B,IAAjBA,EAAOC,OAAeD,EAAOF,KACzCA,EAAKR,QAAUU,EAAOF,KAEtB,eAAU,gBAAD,OAAiBE,EAAOE,UANpB,mDASf,eAAU,gBAAD,OAAiB,KAAEA,UATb,yDAAJ,qDAYG,SAAdjB,GAAwBY,EAAY,GACtCE,IAlB+B,MAoBb,eAAOD,GAAnBR,EApByB,EAoBzBA,QAEFa,EAAS,iBACTjB,EAAmB,yDAAI,WAAOkB,GAAP,8FACb,SAAVA,EADuB,oBAEnBC,EAAaf,EAAQgB,QACvBD,GAAcA,EAAWjB,MAAQiB,EAAWX,OAASW,EAAWb,YAH3C,wBAIjBe,EAAU,qBAAsC,SAAdtB,GAAwBY,EAAY,EAArC,WAA8CA,GAAc,IAJ5E,kBAMA,eAAKU,EAASF,EAAY,CAAEG,QAAS,CAAE,eAAgB,sBANvD,OAMfR,EANe,OAOjBA,GAA2B,IAAjBA,EAAOC,OACnB,eAAU,aACVQ,YAAW,WACTN,EAAOO,KAAK,CAAEtB,KAAM,kBACnB,MAEH,eAAU,cAAD,OAAeY,EAAOE,UAbZ,qDAgBrB,eAAU,cAAD,OAAe,KAAEA,UAhBL,gCAmBvB,eAAU,+BAnBa,0DAAJ,sDAuBzB,MAAO,CACLjB,YACAK,UACAJ,yBAGW,GACbE,KAAM,cACNuB,WAAY,CACVC,gBAAA,KACAC,QAAA,MAEFC,MANa,WAOX,yBACK,O,UCzGT,EAAOC,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,2DCRf","file":"js/addressEdit.bfdc53c8.js","sourcesContent":["<template>\n  <div class=\"address\">\n    <AddressHeader\n      :status=\"eventType\"\n      @actionBtnClick=\"handleActionBtnClick\"/>\n      <div class=\"address__form__wrapper\">\n        <div class=\"address__form\">\n          <div class=\"address__form__item\">\n            <label>\n              所在城市：\n              <input type=\"text\" name=\"city\" placeholder=\"如重庆市\" v-model=\"address.city\">\n            </label>\n          </div>\n          <div class=\"address__form__item\">\n            <label>\n              小区/大厦/学校：\n              <input type=\"text\" name=\"department\" placeholder=\"如理工大学北苑\" v-model=\"address.department\">\n            </label>\n          </div>\n          <div class=\"address__form__item\">\n            <label>\n              楼号-门牌号：\n              <input type=\"text\" name=\"housenumber\" placeholder=\"如B栋4-11号\" v-model=\"address.houseNumber\">\n            </label>\n          </div>\n          <div class=\"address__form__item\">\n            <label>\n              收货人：\n              <input type=\"text\" name=\"name\" placeholder=\"请填写收货人姓名\" v-model=\"address.name\">\n            </label>\n          </div>\n          <div class=\"address__form__item\">\n            <label>\n              联系电话：\n              <input type=\"text\" name=\"phone\" placeholder=\"请填写收货人联系电话\" v-model=\"address.phone\">\n            </label>\n          </div>\n        </div>\n      </div>\n  </div>\n  <Toast />\n</template>\n\n<script>\nimport { useRoute, useRouter } from 'vue-router'\nimport { get, post } from '../../utils/request'\nimport AddressHeader from './components/AddressHeader'\nimport Toast, { showToast } from '../../components/Toast'\nimport { reactive, toRefs } from 'vue'\n\nconst useAddressEditEffect = () => {\n  // 根据用户地址 id 加载用户收获地址详情数据\n  const route = useRoute()\n  const { eventType, addressId } = route.query\n  const data = reactive({ address: {} })\n  const getAddress = async () => {\n    try {\n      const result = await get(`/api/user/address/${addressId}`)\n      if (result && result.errno === 0 && result.data) {\n        data.address = result.data\n      } else {\n        showToast(`获取用户收货地址详情失败！${result.message}`)\n      }\n    } catch (e) {\n      showToast(`获取用户收货地址详情出错！${e.message}`)\n    }\n  }\n  if (eventType === 'edit' && addressId > 0) {\n    getAddress()\n  }\n  const { address } = toRefs(data)\n  // 顶部 header action btn click 事件（保存跳转到管理）\n  const router = useRouter()\n  const handleActionBtnClick = async (etype) => {\n    if (etype === 'save') {\n      const newaddress = address.value\n      if (newaddress && newaddress.name && newaddress.phone && newaddress.department) {\n        const postUrl = '/api/user/address' + ((eventType === 'edit' && addressId > 0) ? `/${addressId}` : '')\n        try {\n          const result = await post(postUrl, newaddress, { headers: { 'content-type': 'application/json' } })\n          if (result && result.errno === 0) {\n            showToast('更新收货地址成功！')\n            setTimeout(() => {\n              router.push({ name: 'AddressList' })\n            }, 2000)\n          } else {\n            showToast(`保存收货地址信息失败！${result.message}`)\n          }\n        } catch (e) {\n          showToast(`保存收货地址信息出错！${e.message}`)\n        }\n      } else {\n        showToast('收货地址信息填写不完整！（姓名，电话，小区等为必填项）')\n      }\n    }\n  }\n  return {\n    eventType,\n    address,\n    handleActionBtnClick\n  }\n}\nexport default {\n  name: 'AddressList',\n  components: {\n    AddressHeader,\n    Toast\n  },\n  setup () {\n    return {\n      ...useAddressEditEffect()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../assets/style/variables.scss';\n\n.address {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  a {\n    text-decoration: none;\n  }\n}\n\n.address__form__wrapper {\n  position: absolute;\n  top: .44rem;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  box-sizing: border-box;\n  overflow: hidden auto;\n  background: $search-bgcolor;\n}\n.address__form{\n  margin-top: .12rem;\n  padding: 0 .18rem;\n  line-height: .2rem;\n  font-size: .14rem;\n  background: #fff;\n  &__item {\n    border-top: 1px solid $content-bgcolor; // TODO: 1px border\n    padding: .12rem 0;\n    &:first-child {\n      border-top: none;\n    }\n  }\n  label {\n    color: $medium-fontcolor;\n    display: flex;\n  }\n  input {\n    flex: 1;\n    outline: none;\n    margin: 0;\n    border: none;\n    padding: 0;\n    color: #3F3F3F;\n    background: none;\n  }\n}\n</style>\n","import { render } from \"./AddressEdit.vue?vue&type=template&id=52002cea&scoped=true\"\nimport script from \"./AddressEdit.vue?vue&type=script&lang=js\"\nexport * from \"./AddressEdit.vue?vue&type=script&lang=js\"\n\nimport \"./AddressEdit.vue?vue&type=style&index=0&id=52002cea&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-52002cea\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AddressEdit.vue?vue&type=style&index=0&id=52002cea&lang=scss&scoped=true\""],"sourceRoot":""}