(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderComfirmation"],{"0eb4":function(e,c,t){"use strict";t.d(c,"b",(function(){return s}));var n=t("7a23"),a=Object(n["M"])("data-v-3350b2b6");Object(n["u"])("data-v-3350b2b6");var r={key:0,class:"toast"};Object(n["s"])();var o=a((function(e,c,t,a,o,i){return e.data.content.length?(Object(n["r"])(),Object(n["d"])("div",r,Object(n["C"])(e.data.content),1)):Object(n["e"])("",!0)})),i=Object(n["v"])({content:"",time:3e3}),s=function(e,c){e.length&&(c>500&&(i.time=c),i.content=e)},u={name:"Toast",setup:function(){var e=Object(n["D"])(i),c=e.content;return Object(n["H"])(c,(function(e){e.length>0&&setTimeout((function(){i.content="",i.time=3e3}),i.time)})),{data:i}}};t("aa26");u.render=o,u.__scopeId="data-v-3350b2b6";c["a"]=u},"186d":function(e,c,t){"use strict";t("6dd5")},"53ab":function(e,c,t){},"6dd5":function(e,c,t){},7273:function(e,c,t){"use strict";t("53ab")},7514:function(e,c,t){"use strict";t("d6c4")},"78ec":function(e,c,t){"use strict";t("8cd0")},"8b22":function(e,c,t){"use strict";t.r(c);var n=t("7a23"),a=Object(n["M"])("data-v-20b2e0ee");Object(n["u"])("data-v-20b2e0ee");var r={class:"wrapper"},o={class:"detail"};Object(n["s"])();var i=a((function(e,c,t,a,i,s){var u=Object(n["y"])("Header"),p=Object(n["y"])("Products"),d=Object(n["y"])("Comfirmation");return Object(n["r"])(),Object(n["d"])("div",r,[Object(n["h"])(u),Object(n["h"])("div",o,[Object(n["h"])(p,{shop:a.shopInfo},null,8,["shop"])]),Object(n["h"])(d)])})),s=t("6c02"),u=(t("b0c0"),Object(n["M"])("data-v-f2f5a714"));Object(n["u"])("data-v-f2f5a714");var p={class:"top"},d={class:"top__header"},b=Object(n["h"])("i",{class:"iconfont icon-back"},null,-1),l=Object(n["h"])("span",null,"确认订单",-1),O={class:"top__receiver"},j=Object(n["h"])("h3",{class:"top__receiver__title"},"收货地址",-1),v={class:"top__receiver__address"},_={class:"top__receiver__user"},h={class:"top__receiver__user__name"},f={class:"top__receiver__user__phone"},m={key:1,class:"top__receiver__empty"},k=Object(n["h"])("i",{class:"iconfont icon-back"},null,-1);Object(n["s"])();var C=u((function(e,c,t,a,r,o){return Object(n["r"])(),Object(n["d"])("div",p,[Object(n["h"])("div",d,[Object(n["h"])("div",{class:"top__header__back",onClick:c[1]||(c[1]=function(){return a.handleBackClick&&a.handleBackClick.apply(a,arguments)})},[b]),l]),Object(n["h"])("div",O,[j,a.receiver._id?(Object(n["r"])(),Object(n["d"])(n["a"],{key:0},[Object(n["h"])("div",v,Object(n["C"])(a.receiver.city)+" "+Object(n["C"])(a.receiver.department)+" "+Object(n["C"])(a.receiver.houseNumber),1),Object(n["h"])("div",_,[Object(n["h"])("span",h,Object(n["C"])(a.receiver.name),1),Object(n["h"])("span",f,Object(n["C"])(a.receiver.phone),1)])],64)):(Object(n["r"])(),Object(n["d"])("div",m," 暂无收获地址，去添加 ")),Object(n["h"])("div",{class:"top__receiver__detail",onClick:c[2]||(c[2]=function(e){return a.handleReceiverClick(a.receiver._id)})},[k])])])})),y=t("1da1"),w=(t("96cf"),t("b775")),I=function(){var e=Object(n["v"])({receiver:{}}),c=function(){var c=Object(y["a"])(regeneratorRuntime.mark((function c(){var t;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,Object(w["a"])("/api/user/address");case 2:t=c.sent,t&&0===t.errno&&t.data&&(e.receiver=t.data[0]);case 4:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();c();var t=Object(n["D"])(e),a=t.receiver,r=Object(s["d"])(),o=function(e){r.push({name:"AddressEdit",query:{eventType:"edit",addressId:e}})};return{receiver:a,handleReceiverClick:o}},T={name:"Header",setup:function(){var e=Object(s["d"])(),c=function(){e.back()},t=I(),n=t.receiver,a=t.handleReceiverClick;return{handleBackClick:c,receiver:n,handleReceiverClick:a}}};t("186d");T.render=C,T.__scopeId="data-v-f2f5a714";var P=T,g=t("7079"),B=Object(n["M"])("data-v-8a5cd9d6");Object(n["u"])("data-v-8a5cd9d6");var S={class:"comfirm"},R={class:"comfirm__price"},x=Object(n["g"])(" 实付金额 "),M={class:"comfirm__price--final"};Object(n["s"])();var H=B((function(e,c,t,a,r,o){var i=Object(n["y"])("Popup"),s=Object(n["y"])("Toast");return Object(n["r"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("div",S,[Object(n["h"])("div",R,[x,Object(n["h"])("span",M,"￥"+Object(n["C"])(a.calculations.checkedPrice),1)]),Object(n["h"])("div",{class:"comfirm__btn",onClick:c[1]||(c[1]=function(e){return a.changePopupShowType("comfirm")})},"提交订单")]),Object(n["h"])(i,{onPopupButtonClick:a.handlePopupButtonClick},null,8,["onPopupButtonClick"]),Object(n["h"])(s)],64)})),D=t("5502"),J=Object(n["M"])("data-v-e0a2a64a");Object(n["u"])("data-v-e0a2a64a");var N={key:0,class:"popup"},q={class:"popup__mask"},A={key:0,class:"popup__content"},E=Object(n["h"])("h3",{class:"popup__content__title"},"确认离开收银台吗？",-1),L=Object(n["h"])("p",{class:"popup__content__desc"},"请尽快完成支付，否则将被取消",-1),z={class:"popup__content__buttons"},F={key:1,class:"popup__content"},G=Object(n["h"])("div",{class:"popup__content__icons"},[Object(n["h"])("i",{class:"iconfont icon-success"})],-1),K=Object(n["h"])("h3",{class:"popup__content__title"},"支付成功，等待配送",-1),Q={key:2,class:"popup__content"},U=Object(n["h"])("div",{class:"popup__content__icons"},[Object(n["h"])("i",{class:"iconfont icon-cancel"})],-1),V=Object(n["h"])("h3",{class:"popup__content__title"},"支付失败，请检查网络",-1),W={key:3,class:"popup__content"},X=Object(n["h"])("div",{class:"popup__content__icons"},[Object(n["h"])("i",{class:"iconfont icon-cancel"})],-1),Y=Object(n["h"])("h3",{class:"popup__content__title"},"已取消",-1);Object(n["s"])();var Z=J((function(e,c,t,a,r,o){return"none"!=e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",N,[Object(n["h"])("div",q,["comfirm"==e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",A,[E,L,Object(n["h"])("div",z,[Object(n["h"])("button",{class:"cancel",onClick:c[1]||(c[1]=function(){return e.handleCancelClick&&e.handleCancelClick.apply(e,arguments)})},"取消订单"),Object(n["h"])("button",{class:"comfirmed",onClick:c[2]||(c[2]=function(){return e.handleComfirmClick&&e.handleComfirmClick.apply(e,arguments)})},"确认支付")])])):Object(n["e"])("",!0),"success"==e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",F,[G,K])):Object(n["e"])("",!0),"faild"==e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",Q,[U,V])):Object(n["e"])("",!0),"cancel"==e.popupShowType?(Object(n["r"])(),Object(n["d"])("div",W,[X,Y])):Object(n["e"])("",!0)])])):Object(n["e"])("",!0)})),$=t("5530"),ee=Object(n["w"])("none"),ce=function(e){["none","comfirm","success","faild","cancel"].indexOf(e)>-1?ee.value=e:ee.value="none"},te=function(e){var c=function(){e("popupButtonClick","cancel")},t=function(){e("popupButtonClick","comfirmed")};return{popupShowType:ee,changePopupShowType:ce,handleCancelClick:c,handleComfirmClick:t}},ne={name:"Popup",setup:function(e,c){var t=c.emit;return Object($["a"])({},te(t))}};t("78ec");ne.render=Z,ne.__scopeId="data-v-e0a2a64a";var ae=ne,re=t("0eb4"),oe=t("9983"),ie=function(e){var c=Object(s["d"])(),t=Object(D["b"])(),a={_id:1},r=Object(oe["a"])(e),o=r.shopInfo,i=r.products,u=Object(n["b"])((function(){var e=[];for(var c in i.value){var t=i.value[c];t&&t.checked&&e.push({id:t._id,num:t.count})}return e})),p={addressId:a._id,shopId:o.value._id,shopName:o.value.name,isCanceled:!1,products:u.value},d=function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p.isCanceled=n,ce("none"),e.prev=2,e.next=5,Object(w["b"])("/api/order",p,{headers:{"content-type":"application/json"}});case 5:a=e.sent,a&&0===a.errno?(ce(n?"cancel":"success"),setTimeout((function(){ce("none"),n||(t.commit("clearCartProducts",{shopId:p.shopId}),c.push({name:"OrderList"}))}),2e3)):Object(re["b"])("创建订单失败，".concat(a.message)),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),Object(re["b"])("创建订单出错，".concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(c){return e.apply(this,arguments)}}();return{createOrder:d}},se={name:"Comfirmation",components:{Popup:ae,Toast:re["a"]},setup:function(){var e=Object(s["c"])(),c=e.params.shopId,t=Object(oe["a"])(c),n=t.calculations,a=ie(c),r=a.createOrder,o=function(e){"cancel"===e&&r(!0),"comfirmed"===e&&r(!1)};return{calculations:n,changePopupShowType:ce,handlePopupButtonClick:o}}};t("7514");se.render=H,se.__scopeId="data-v-8a5cd9d6";var ue=se,pe={name:"OrderComfirmation",components:{Header:P,Products:g["a"],Comfirmation:ue},setup:function(){var e=Object(s["c"])(),c=e.params.shopId,t=Object(oe["a"])(c),n=t.shopInfo;return{shopInfo:n}}};t("7273");pe.render=i,pe.__scopeId="data-v-20b2e0ee";c["default"]=pe},"8cd0":function(e,c,t){},aa26:function(e,c,t){"use strict";t("d0a2")},d0a2:function(e,c,t){},d6c4:function(e,c,t){}}]);
//# sourceMappingURL=orderComfirmation.41ab3f5c.js.map